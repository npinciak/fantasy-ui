<div fxLayout="row" fxLayoutGap="20px" fxLayout.sm="column" fxLayout.xs="column">
  <div fxFlex="30%" fxFlex.sm="100%">
    <app-lineup-card
      title="Starting Lineup"
      [lineup]="(fantasyBaseballTeamFacade.startingBatters$ | async)!(teamId)"
      (fetchPlayerDetails)="fantasyBaseballPlayerFacade.getPlayerNews($event.id)"
    ></app-lineup-card>
    <div style="margin: 10px 0"></div>
    <app-lineup-card
      title="Bench"
      [lineup]="(fantasyBaseballTeamFacade.benchBatters$ | async)!(teamId)"
      (fetchPlayerDetails)="fantasyBaseballPlayerFacade.getPlayerNews($event.id)"
    ></app-lineup-card>
  </div>
  <div fxFlex="70%" fxFlex.sm="100%">
    <a mat-flat-button color="primary" (click)="navigateHome()">Home</a>
    <div style="margin: 10px 0"></div>

    <app-dropdown-filter
      [selectedOption]="scoringPeriodId"
      title="Stat Period"
      [filterItems]="STAT_PERIOD_FILTER_OPTIONS"
      (filterUpdate)="onScoringPeriodIdChange($event.value)"
    ></app-dropdown-filter>

    <mat-form-field>
      <mat-label>Batter Stats</mat-label>
      <mat-select [(value)]="selectedBatterStat" (selectionChange)="onBatterStatChange($event.value)">
        <mat-option *ngFor="let stat of statList" [value]="stat">{{ MLB_STAT_MAP[stat].abbrev }}</mat-option>
      </mat-select>
    </mat-form-field>

    <div>
      <app-data-vis
        [title]="MLB_STAT_MAP[selectedBatterStat].description"
        [statFilter]="selectedBatterStat"
        [chartData]="(fantasyBaseballTeamFacade.batterChartData$ | async)!(teamId, scoringPeriodId, selectedBatterStat)"
      ></app-data-vis>
    </div>
    <h3>Batting</h3>
    <mat-slide-toggle (change)="onLiveScoringSelectChange($event)" color="primary"> Live Scoring </mat-slide-toggle>
    <ng-container *ngIf="isLiveScore; else default">
      <app-roster [data]="(fantasyBaseballTeamFacade.liveBattingStats$ | async)!(teamId)" [dataColumns]="BATTER_STATS_LIVE_ROWS" [headers]="BATTER_STATS_LIVE_HEADERS">
      </app-roster>
    </ng-container>

    <ng-template #default>
      <app-roster [data]="(fantasyBaseballTeamFacade.battingStats$ | async)!(teamId, scoringPeriodId)" [dataColumns]="BATTER_STATS_ROWS" [headers]="BATTER_STATS_HEADERS">
      </app-roster>
    </ng-template>

    <h3>Pitching</h3>

    <mat-form-field>
      <mat-label>Pitcher Stats</mat-label>
      <mat-select [(value)]="selectedPitcherStat" (selectionChange)="onPitcherStatChange($event.value)">
        <mat-option *ngFor="let stat of statList" [value]="stat">{{ MLB_STAT_MAP[stat].abbrev }}</mat-option>
      </mat-select>
    </mat-form-field>

    <div>
      <h4>{{ MLB_STAT_MAP[selectedPitcherStat].description }}</h4>
      <app-data-vis [statFilter]="selectedPitcherStat" [chartData]="(fantasyBaseballTeamFacade.pitcherStats$ | async)!(teamId, scoringPeriodId)"></app-data-vis>
    </div>
    <app-roster [data]="(fantasyBaseballTeamFacade.pitcherStats$ | async)!(teamId, scoringPeriodId)" [dataColumns]="PITCHER_STATS_ROWS" [headers]="PITCHER_STATS_HEADERS">
    </app-roster>
  </div>
</div>
